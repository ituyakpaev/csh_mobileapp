(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca44183a"],{"0a25":function(t,e,a){"use strict";a("d81d"),a("b64b");e["a"]={data:function(){return{isNew:!1,id:""}},watch:{value:function(t){if(this.isNew=t.id<0,this.id=t.id,console.log(this.isNew),console.log(t),this.isNew){var e={};Object.keys(this.entity).map((function(t){e[t]=""})),this.entity=e}else this.entity=t}}}},"1aba":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inner content"},[a("panel_box",{attrs:{title:t.user.name}},[a("div",[t._v(" Имя ученика: "+t._s(t.user.name)+" "),a("span",{staticStyle:{opacity:".3"}},[t._v("#"+t._s(t.user.user_id))]),a("br"),t._v(" Почта: "+t._s(t.user.email)+" ")]),a("button_box",{attrs:{performing:t.letter.isPerforming,title:"Отправить письмо о сдаче ДЗ"},on:{click:function(e){return t.sendLetter()}}}),a("notification",{attrs:{notification:t.letter.notification}}),a("table_box",t._b({on:{open:function(e){return t.open(e)}}},"table_box",t.table,!1)),a("item",{attrs:{value:t.item.value,show:t.item.show},on:{close:function(e){t.item.show=!1}}})],1)],1)},n=[],o=(a("96cf"),a("1da1")),r=a("0594"),s=a("eff5"),c=a("1d9d"),u=a("0dd2"),l=a("75be"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{show:t.show},on:{close:function(e){return t.$emit("close")}}},[a("div",{staticClass:"h2",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.value.title)+" "),a("span",{staticStyle:{opacity:".3"}},[t._v("#"+t._s(t.id))])]),a("div",[a("div",{staticClass:"h3"},[t._v(" Файлы домашней работы ")]),0===t.model.files.length?a("div",[t._v(" Не загружено ни одного файла ")]):t._e(),a("div",{staticClass:"certificate-homework__files"},t._l(t.model.files.value,(function(t){return a("div",{key:t.id,staticClass:"certificate-homework__file"},[a("img",{attrs:{src:t.link}})])})),0)]),a("input_box",t._b({model:{value:t.model.curator_comment.value,callback:function(e){t.$set(t.model.curator_comment,"value",e)},expression:"model.curator_comment.value"}},"input_box",t.model.curator_comment,!1)),a("radio_box",{attrs:{rows:t.model.status.rows},model:{value:t.model.status.value,callback:function(e){t.$set(t.model.status,"value",e)},expression:"model.status.value"}}),a("button_box",{attrs:{title:"Сохранить",performing:t.isPerforming},on:{click:t.saveData}})],1)},f=[],d=a("5530"),p=a("348c"),h=a("654c"),v=a("0a25"),_=a("1825"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","flex-direction":"column"}},t._l(t.rows,(function(e){return a("label",{key:e.value||e.title,staticClass:"radiobuttons"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.valueMirror,expression:"valueMirror"}],staticClass:"radiobuttons__item",attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.valueMirror,e.value)},on:{input:function(a){t.valueMirror=e.value},change:function(a){t.valueMirror=e.value}}}),a("span",{staticClass:"radiobuttons__radio"}),a("span",{staticClass:"radiobuttons__text"},[t._v(" "+t._s(e.title)+" ")])])})),0)},g=[],w={name:"checkbox",props:{rows:{type:Array,default:function(){return[]}},value:{required:!0}},computed:{valueMirror:{get:function(){return this.value},set:function(t){return this.$emit("input",t),t}}}},x=w,k=(a("dbb1"),a("2877")),y=Object(k["a"])(x,b,g,!1,null,null,null),j=y.exports,C={name:"homework",props:{value:{type:Object},show:{type:Boolean,default:!1}},components:{modal:p["a"],radio_box:j},mixins:[h["a"],v["a"],_["a"]],data:function(){return{isPerforming:!1,model:{curator_comment:{value:"",label:"Ваш комментарий"},status:{value:"",label:"",rows:[{title:"На проверке",value:"checking"},{title:"Сдано",value:"passed"},{title:"Отклонено",value:"rejected"}]},title:{value:"",ignore:!0},files:{value:[],ignore:!0}}}},methods:{saveData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.validate()){t.next=7;break}return this.isPerforming=!0,console.log(this.id),console.log(this.entity),t.next=6,s["a"].updateHomework(this.id,this.entity).then((function(t){console.log(t),e.entity=Object(d["a"])(Object(d["a"])({},t.data),{},{files:e.model.files.value}),e.$emit("update")})).catch((function(t){alert("Произошла ошибка. Код: ".concat(t.code))}));case 6:this.isPerforming=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},O=C,$=(a("3930"),Object(k["a"])(O,m,f,!1,null,null,null)),P=$.exports,L={name:"homework",components:{panel_box:r["a"],table_box:u["a"],item:P,notification:l["a"]},data:function(){return{isLoading:!0,isPerforming:!1,errorLog:[],user:{},letter:{isPerforming:!1,notification:{status:!0,message:""}},table:{manage:[],headers:{title:{title:"Название"},status:{title:"Статус"}},meta:{},data:[]},item:{show:!1,value:{}}}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,s["a"].getUserHomeworks(this.$route.params.user_id).then((function(t){console.log(t),e.table.data=t.data.homework,e.table.meta={count:t.data.homework.length,limit:t.data.homework.length,skip:0},e.user=t.data})).catch((function(t){e.errorLog.push(t)}));case 3:this.isLoading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),open:function(t){t?(console.log(t),this.item.value=t):this.item.value={id:-1},this.item.show=!0},sendLetter:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.letter.isPerforming=!0,this.letter.notification.message="",t.next=4,c["a"].sendLetterCertificate(this.user.email).then((function(t){t.data.status?(e.letter.notification.status=!0,e.letter.notification.message="Письмо отправлено"):(e.letter.notification.status=!1,e.letter.notification.message="Произошла ошибка")})).catch((function(t){e.letter.notification.status=!1,e.letter.notification.message="Произошла ошибка",console.log(t)}));case 4:this.letter.isPerforming=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getData()}},M=L,H=Object(k["a"])(M,i,n,!1,null,null,null);e["default"]=H.exports},"348c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"popup"},[a("div",{staticClass:"popup__overlay"}),a("div",{staticClass:"popup__layout"},[a("div",{staticClass:"popup__close",on:{click:function(e){return t.$emit("close")}}},[a("icon",{attrs:{name:"close",width:"40"}})],1),a("div",{staticClass:"popup__content",staticStyle:{padding:"40px 20px"}},[t._t("default")],2)])])},n=[],o={name:"modal_box",props:{show:{type:Boolean,default:!1}}},r=o,s=a("2877"),c=Object(s["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},3930:function(t,e,a){"use strict";var i=a("e111"),n=a.n(i);n.a},"75be":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.notification.message?a("div",{staticClass:"notification",style:{color:t.notification.status?"green":"red"},domProps:{innerHTML:t._s(t.notification.message)}}):t._e()},n=[],o={name:"notification",props:{notification:{type:Object,required:!0}}},r=o,s=a("2877"),c=Object(s["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},acfa:function(t,e,a){},dbb1:function(t,e,a){"use strict";var i=a("acfa"),n=a.n(i);n.a},e111:function(t,e,a){},eff5:function(t,e,a){"use strict";a("99af");var i=a("7598"),n=a("c756");e["a"]={getGroups:function(t){return i["a"].get("".concat(n["a"],"bitrix/curator/homework/groups").concat(Object(n["b"])(t)))},getHomeworks:function(t,e){return i["a"].get("".concat(n["a"],"bitrix/curator/homework/groups/").concat(t).concat(Object(n["b"])(e)))},getUserHomeworks:function(t){return i["a"].get("".concat(n["a"],"bitrix/curator/homework/").concat(t))},updateHomework:function(t,e){return i["a"].put("".concat(n["a"],"bitrix/curator/homework/").concat(t),e)}}}}]);
//# sourceMappingURL=chunk-ca44183a.f910a5d0.js.map