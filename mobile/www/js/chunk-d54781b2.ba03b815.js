(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d54781b2"],{"0594":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panel"},[a("div",{staticClass:"panel__inner",class:{padding:e.padding}},[e.title?a("div",{staticClass:"h1",domProps:{innerHTML:e._s(e.title)}}):e._e(),e.subtitle?a("div",{staticClass:"text",domProps:{innerHTML:e._s(e.subtitle)}}):e._e(),a("div",{staticClass:"panel__content",class:e.innerClass},[e._t("default")],2)])])},s=[],i={name:"panel_box",props:{padding:{type:Boolean,default:!0},title:String,subtitle:String,innerClass:String}},l=i,r=(a("99d2"),a("2877")),c=Object(r["a"])(l,n,s,!1,null,null,null);t["a"]=c.exports},"0dd2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("manage",{attrs:{meta:e.meta,query:e.query},on:{add:function(t){return e.$emit("add",t)},search:function(t){return e.$emit("query:update",t)}}}),e.query&&e.query_parse?a("query_parse",{attrs:{query:e.query},on:{cancel:function(t){return e.$emit("query:update",t)}}}):e._e(),a("div",{staticClass:"table__inner"},[a("v_header",{on:{sort:function(t){return e.$emit("sort",t)},select_all:function(t){e.all_is_selected=!!t}}}),e.isLoading&&0===e.errorLog.length?a("div",{staticClass:"table__row loading"},e._l(e.headers,(function(t,n){return a("div",{key:n,staticClass:"table__cell loading",class:n,style:{width:t.width?t.width+"px":""},on:{click:function(t){return e.$emit("click:cell:"+n)}}},[a("span",{staticClass:"loader"},[e._v(" "+e._s(t.title)+" ")])])})),0):e._e(),!e.isLoading&&0===e.errorLog.length&&e.data.length>0?a("div",{staticClass:"table__body"},[e._t("default",e._l(e.data,(function(t,n){return a("row",{key:t.link||t.id||n,attrs:{row:t,index:n},on:{open:function(t){return e.$emit("open",t)},select:e.selectRow}})})))],2):e._e(),e.isLoading||0!==e.errorLog.length||0!==e.data.length?e._e():a("div",{staticClass:"table__body-empty"},[e._v(" Таблица пуста. ")]),e.errorLog.length>0?a("div",{staticClass:"table__body-empty-error"},[a("span",{domProps:{innerHTML:e._s(e.errorLog.map((function(e){return e.text+" Код ошибки "+e.code})).join(", "))}})]):e._e()],1),e.meta.count?a("pagination",{attrs:{meta:e.meta},on:{paginate:function(t){return e.$emit("query:update",t)}}}):e._e()],1)},s=[],i=(a("c740"),a("a434"),a("9911"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table__footer"},[e.meta.count?a("div",{staticClass:"table__footer-numeric"},[e._v(" "+e._s(e.meta.skip)+"-"+e._s(e.meta.limit+e.meta.skip>e.meta.count?e.meta.count:e.meta.limit+e.meta.skip)+" из "+e._s(e.meta.count)+" ")]):e._e(),e.meta.count>=e.meta.limit?a("div",{staticClass:"table__pagination"},[e.page-2>1?a("div",{staticClass:"table__pagination-page",on:{click:function(t){return e.paginate(1)}}},[e._v("1")]):e._e(),e.page-2>1?a("div",{staticClass:"table__pagination-page"},[e._v("...")]):e._e(),e._l(e.pages_show,(function(t){return a("div",{key:t,staticClass:"table__pagination-page",class:{active:t===e.page},on:{click:function(a){return e.paginate(t)}}},[e._v(" "+e._s(t)+" ")])})),e.page_max-e.page>2?a("div",{staticClass:"table__pagination-page"},[e._v("...")]):e._e(),e.page_max-e.page>2?a("div",{staticClass:"table__pagination-page",on:{click:function(t){return e.paginate(e.page_max)}}},[e._v(e._s(e.page_max))]):e._e()],2):e._e()])}),l=[],r=(a("99af"),a("2909")),c={name:"pagination",props:{meta:Object},computed:{page:function(){return this.meta.skip/this.meta.limit+1},page_max:function(){return Math.ceil(this.meta.count/this.meta.limit)},pages_show:function(){var e=[];return this.page>2?e=[this.page-2,this.page-1]:2===this.page&&(e=[1]),e=[].concat(Object(r["a"])(e),[this.page]),this.page_max-this.page>=2?e=[].concat(Object(r["a"])(e),[this.page+1,this.page+2]):this.page_max-this.page===1&&(e=[].concat(Object(r["a"])(e),[this.page+1])),e}},methods:{paginate:function(e){console.log(e);var t={skip:(e-1)*this.meta.limit,limit:this.meta.limit};this.$emit("paginate",t)}}},o=c,u=a("2877"),_=Object(u["a"])(o,i,l,!1,null,null,null),d=_.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!e.manage||e.manage.length>0?a("div",{staticClass:"table__manage"},[e.manage&&-1===e.manage.indexOf("add")?e._e():a("button",{staticClass:"table__manage-addnew",on:{click:function(t){return e.$emit("add")}}},[e._v(" Добавить ")]),e.manage&&-1===e.manage.indexOf("search")?e._e():a("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"}],staticClass:"table__manage-search",attrs:{type:"text",placeholder:"Поиск"},domProps:{value:e.q},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.performSearch(t)},input:function(t){t.target.composing||(e.q=t.target.value)}}})]):e._e()},m=[],h={name:"manage",props:{meta:Object,query:Object},data:function(){return{q:""}},inject:["manage"],methods:{performSearch:function(){console.log("search is performed"),this.$emit("search",{q:this.q,skip:0})}}},g=h,f=Object(u["a"])(g,p,m,!1,null,null,null),v=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showHeader?a("div",{staticClass:"table__row-header"},[e.mass_action_enabled?a("div",{staticClass:"table__cell-header table__cell-header-selection"},[a("checkbox",{style:{"margin-bottom":0},attrs:{value:e.all_is_selected},on:{change:function(t){return e.selectAll(t)}}})],1):e._e(),e._l(e.headers,(function(t,n){return a("div",{key:n,staticClass:"table__cell-header",class:n,style:{width:t.width?t.width+"px":""},on:{click:function(a){return e.$emit("sort",{key:n,title:t.title})}}},[e._v(" "+e._s(t.title)+" ")])})),e.cell_manage?a("div",{staticClass:"table__cell-header",staticStyle:{width:"30px"}}):e._e(),e.all_is_selected||e.selected.length>0?a("selected"):e._e()],2):e._e()},y=[],w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-selected"},[a("div",{staticClass:"table-selected__actions"},e._l(e.mass_actions,(function(t){return a("div",{key:t.key,staticClass:"table-selected__action",on:{click:function(a){return e.$emit("mass_action:"+t.key,e.selected)}}},[e._v(" "+e._s(t.title)+" ")])})),0),a("div",{staticClass:"table-selected__count"},[e._v("Выбрано: "+e._s(e.all_is_selected?e.meta.count:e.selected.length))])])},C=[],k={name:"selected",inject:["mass_actions","selected","all_is_selected"]},x=k,q=Object(u["a"])(x,w,C,!1,null,null,null),j=q.exports,L={name:"header_t",components:{selected:j},props:{meta:Object},inject:["showHeader","cell_manage","headers","mass_action_enabled","all_is_selected","selected"],methods:{selectAll:function(e){this.$emit("select_all",e)}}},$=L,O=Object(u["a"])($,b,y,!1,null,null,null),S=O.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.rows_route_name?a("router-link",{staticClass:"table__row",attrs:{tag:"a",to:{name:e.rows_route_name,params:{link:e.row.link||e.row.id}}}},[e.mass_action_enabled?a("div",{staticClass:"table__cell table__cell-selection"},[a("checkbox",{attrs:{value:e.all_is_selected},on:{change:function(t){return e.$emit("select",e.row)}}})],1):e._e(),e._l(e.headers,(function(t,n){return a("div",{key:n,staticClass:"table__cell",class:n,style:{width:t.width?t.width+"px":""},domProps:{innerHTML:e._f("td")(e.row[n],t,e.basePath)}})}))],2):a("div",{staticClass:"table__row"},[e.mass_action_enabled?a("div",{staticClass:"table__cell table__cell-selection"},[a("checkbox",{attrs:{value:e.all_is_selected},on:{change:function(t){return e.$emit("select",e.row)}}})],1):e._e(),e._l(e.headers,(function(t,n){return a("div",{key:n,staticClass:"table__cell",class:n,style:{width:t.width?t.width+"px":""},domProps:{innerHTML:e._f("td")(e.row[n],t,e.basePath)},on:{click:function(t){return e.$emit("open",e.row,e.index)}}})}))],2)},H=[],M={name:"row",props:{row:{},index:{}},inject:["headers","isLoading","cell_manage","selected","mass_action_enabled","all_is_selected","rows_route_name"],filters:{td:function(e,t,a){return t.type?"Boolean"===t.type?e?"Да":"Нет":"image"===t.type?'<img src="'.concat(e||a+"placeholder.png",'">'):"<span title='".concat(e||"","'>").concat(e||"","</span>"):"<span title='".concat(e||"","'>").concat(e||"","</span>")}}},P=M,A=Object(u["a"])(P,E,H,!1,null,null,null),B=A.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-query"},e._l(e.query_parsed,(function(t,n){return a("div",{key:n,staticClass:"table-query__item"},[e._v(" "+e._s(t.title)+" "+e._s(t.value)+" "),a("div",{staticClass:"table-query__item-close",on:{click:function(t){return e.cancel_query(n)}}},[a("svg",{staticClass:"Polaris-Icon__Svg_375hu",attrs:{viewBox:"0 0 20 20",focusable:"false","aria-hidden":"true"}},[a("path",{attrs:{d:"M11.414 10l4.293-4.293a.999.999 0 1 0-1.414-1.414L10 8.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L8.586 10l-4.293 4.293a.999.999 0 1 0 1.414 1.414L10 11.414l4.293 4.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L11.414 10z"}})])])])})),0)},R=[],I=(a("d81d"),a("b64b"),{name:"query_parse",props:["query"],inject:["query_parse"],computed:{query_parsed:function(){var e=this,t={};return Object.keys(this.query_parse).map((function(a){"undefined"!==typeof e.query[a]&&""!==e.query[a]&&(t[a]={title:e.query_parse[a],value:decodeURI(e.query[a])})})),t}},methods:{cancel_query:function(e){var t={};t[e]="",this.$emit("cancel",t)}}}),J=I,z=Object(u["a"])(J,T,R,!1,null,null,null),N=z.exports,U={name:"tableBox",components:{manage:v,pagination:d,v_header:S,row:B,query_parse:N},props:{isLoading:Boolean,id:String,errorLog:{type:Array,default:function(){return[]}},headers:{type:Object,required:!0},showHeader:{type:Boolean,default:!0},rows_route_name:{type:String},query:{default:function(){return{}}},query_parse:Object,manage:{type:Array,default:function(){return null}},data:{type:Array,required:!0},cell_manage:{},meta:{type:Object,default:function(){return{}}},mass_action_enabled:{type:Boolean,default:!1},mass_actions:{type:Array,default:function(){return[]}}},data:function(){return{selected:[],all_is_selected:!1}},provide:function(){return{isLoading:this.isLoading,errorLog:this.errorLog,headers:this.headers,showHeader:this.showHeader,rows_route_name:this.rows_route_name,manage:this.manage,data:this.data,cell_manage:this.cell_manage,mass_actions:this.mass_actions,mass_action_enabled:this.mass_action_enabled,selected:this.selected,all_is_selected:this.all_is_selected,query_parse:this.query_parse}},methods:{selectRow:function(e){var t=this.selected.findIndex((function(t){return t.link===e.link}));if(-1===t)this.selected.push(e);else{var a=this.selected.splice(t,1);this.selected=a}}}},D=U,F=(a("6edc"),Object(u["a"])(D,n,s,!1,null,null,null));t["a"]=F.exports},"1b37":function(e,t,a){},2611:function(e,t,a){},"6edc":function(e,t,a){"use strict";var n=a("2611"),s=a.n(n);s.a},"857a":function(e,t,a){var n=a("1d80"),s=/"/g;e.exports=function(e,t,a,i){var l=String(n(e)),r="<"+t;return""!==a&&(r+=" "+a+'="'+String(i).replace(s,"&quot;")+'"'),r+">"+l+"</"+t+">"}},9911:function(e,t,a){"use strict";var n=a("23e7"),s=a("857a"),i=a("af03");n({target:"String",proto:!0,forced:i("link")},{link:function(e){return s(this,"a","href",e)}})},"99d2":function(e,t,a){"use strict";var n=a("1b37"),s=a.n(n);s.a},a434:function(e,t,a){"use strict";var n=a("23e7"),s=a("23cb"),i=a("a691"),l=a("50c4"),r=a("7b0b"),c=a("65f0"),o=a("8418"),u=a("1dde"),_=a("ae40"),d=u("splice"),p=_("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,g=9007199254740991,f="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var a,n,u,_,d,p,v=r(this),b=l(v.length),y=s(e,b),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=b-y):(a=w-2,n=h(m(i(t),0),b-y)),b+a-n>g)throw TypeError(f);for(u=c(v,n),_=0;_<n;_++)d=y+_,d in v&&o(u,_,v[d]);if(u.length=n,a<n){for(_=y;_<b-n;_++)d=_+n,p=_+a,d in v?v[p]=v[d]:delete v[p];for(_=b;_>b-n+a;_--)delete v[_-1]}else if(a>n)for(_=b-n;_>y;_--)d=_+n-1,p=_+a-1,d in v?v[p]=v[d]:delete v[p];for(_=0;_<a;_++)v[_+y]=arguments[_+2];return v.length=b-n+a,u}})},af03:function(e,t,a){var n=a("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-d54781b2.ba03b815.js.map