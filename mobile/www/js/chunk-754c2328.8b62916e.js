(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-754c2328"],{"0a25":function(t,e,n){"use strict";n("d81d"),n("b64b");e["a"]={data:function(){return{isNew:!1,id:""}},watch:{value:function(t){if(this.isNew=t.id<0,this.id=t.id,console.log(this.isNew),console.log(t),this.isNew){var e={};Object.keys(this.entity).map((function(t){e[t]=""})),this.entity=e}else this.entity=t}}}},"348c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"popup"},[n("div",{staticClass:"popup__overlay"}),n("div",{staticClass:"popup__layout"},[n("div",{staticClass:"popup__close",on:{click:function(e){return t.$emit("close")}}},[n("icon",{attrs:{name:"close",width:"40"}})],1),n("div",{staticClass:"popup__content",staticStyle:{padding:"40px 20px"}},[t._t("default")],2)])])},i=[],o={name:"modal_box",props:{show:{type:Boolean,default:!1}}},r=o,s=n("2877"),c=Object(s["a"])(r,a,i,!1,null,null,null);e["a"]=c.exports},ccf0:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inner",staticStyle:{padding:"25px 0"}},[n("panel_box",{attrs:{title:"Домашние работы"}},[n("table_box",t._b({on:{add:function(e){return t.open(!1)},open:function(e){return t.open(e)}}},"table_box",t.table,!1)),n("item",{attrs:{show:t.value.show,value:t.value.data},on:{close:function(e){t.value.show=!1},update:t.getData}})],1)],1)},i=[],o=(n("96cf"),n("1da1")),r=n("0dd2"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{show:t.show},on:{close:function(e){return t.$emit("close")}}},[n("input_box",t._b({model:{value:t.model.course_id.value,callback:function(e){t.$set(t.model.course_id,"value",t._n(e))},expression:"model.course_id.value"}},"input_box",t.model.course_id,!1)),n("input_box",t._b({model:{value:t.model.title.value,callback:function(e){t.$set(t.model.title,"value",e)},expression:"model.title.value"}},"input_box",t.model.title,!1)),n("input_box",t._b({model:{value:t.model.max_files.value,callback:function(e){t.$set(t.model.max_files,"value",t._n(e))},expression:"model.max_files.value"}},"input_box",t.model.max_files,!1)),n("div",{staticStyle:{display:"flex"}},[n("button_box",{attrs:{title:"Сохранить",performing:t.isPerforming},on:{click:t.saveData}}),n("button_box",{attrs:{title:"Удалить",color:"grey"},on:{click:t.deleteData}})],1)],1)},c=[],l=(n("99af"),n("c756")),u=n("7598"),d={getHomeworks:function(t){return u["a"].get("".concat(l["a"],"bitrix/admin/homework/").concat(Object(l["b"])(t)))},getHomework:function(t){return u["a"].get("".concat(l["a"],"bitrix/admin/homework/").concat(t))},createHomework:function(t){return u["a"].post("".concat(l["a"],"bitrix/admin/homework/"),t)},updateHomework:function(t,e){return u["a"].put("".concat(l["a"],"bitrix/admin/homework/").concat(t),e)},deleteHomework:function(t){return u["a"].delete("".concat(l["a"],"bitrix/admin/homework/").concat(t))}},m=n("654c"),p=n("1825"),h={mixins:[p["a"]],methods:{saveData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.validate()){t.next=8;break}return console.log(this.entity),console.log(this.isNew),e=this.isNew?this.api.create(this.entity):this.api.update(this.id,this.entity),this.isPerforming=!0,t.next=7,e.then((function(t){n.entity=t.data,n.isNew=!1,n.id=t.data.id,n.$emit("update")})).catch((function(t){alert("".concat(t.code,": ").concat(t.text)),console.log(t)}));case 7:this.isPerforming=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},f=n("0a25"),v=n("348c"),b={name:"item",mixins:[m["a"],f["a"],h],components:{modal:v["a"]},props:{show:{type:Boolean,default:!1},value:{type:Object}},data:function(){return{isLoading:!0,isPerforming:!1,errorLog:[],model:{course_id:{value:"",label:"ID курса",required:!0},title:{value:"",label:"Название домашней работы",required:!0},max_files:{value:1,label:"Кол-во файлов для загрузки",required:!0}},api:{update:d.updateHomework,create:d.createHomework}}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isLoading=!0,this.isNew||d.getHomework(this.id).then((function(t){e.entity=t})).catch((function(t){e.errorLog.push(t)})),this.isLoading=!1;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:confirm("Вы уверены? Все загруженные домашние работы будут удалены.")&&d.deleteHomework(this.id).then((function(t){e.$emit("close"),e.$emit("update")})).catch((function(t){alert("Произошла ошибка")}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},w=b,x=n("2877"),_=Object(x["a"])(w,s,c,!1,null,null,null),g=_.exports,k=n("0594"),y={name:"index.vue",components:{panel_box:k["a"],item:g,table_box:r["a"]},data:function(){return{table:{isLoading:!0,errorLog:[],data:[],meta:{},headers:{title:{title:"Название"},course_id:{title:"Ид-курса"},max_files:{title:"Макс. файлов"},id:{value:null,ignore:!0}}},value:{data:{},show:!1}}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.table.isLoading=!0,t.next=3,d.getHomeworks(this.$route.query).then((function(t){e.table.data=t.data,e.table.meta={limit:t.data.length,count:t.data.length,skip:0}})).catch((function(t){e.table.errorLog.push(t)}));case 3:this.table.isLoading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),open:function(t){this.value.data=t||{id:-1},this.value.show=!0}},created:function(){this.getData()}},$=y,j=Object(x["a"])($,a,i,!1,null,null,null);e["default"]=j.exports}}]);
//# sourceMappingURL=chunk-754c2328.8b62916e.js.map